<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
































<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.6.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.6.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.6.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.6.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.6.0" color="#222">









<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.6.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="划水划水。。。">
<meta property="og:type" content="website">
<meta property="og:title" content="花果山松鼠’s Blog">
<meta property="og:url" content="http://yoursite.com/page/5/index.html">
<meta property="og:site_name" content="花果山松鼠’s Blog">
<meta property="og:description" content="划水划水。。。">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="花果山松鼠’s Blog">
<meta name="twitter:description" content="划水划水。。。">






  <link rel="canonical" href="http://yoursite.com/page/5/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>花果山松鼠’s Blog</title>
  












  <noscript>
  <style>
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion .logo-line-before i { left: initial; }
    .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">花果山松鼠’s Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">尽管走下去，不必逗留着，采集鲜花并保存，因为在这一路上，沿途的鲜花会继续开放。</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/16/leetCode题库笔记/8. 字符串转整数 (atoi)/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小坤">
      <meta itemprop="description" content="划水划水。。。">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="花果山松鼠’s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/07/16/leetCode题库笔记/8. 字符串转整数 (atoi)/" class="post-title-link" itemprop="url">8. 字符串转整数 (atoi)</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-07-16 10:06:12" itemprop="dateCreated datePublished" datetime="2018-07-16T10:06:12+08:00">2018-07-16</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-12-26 15:14:04" itemprop="dateModified" datetime="2018-12-26T15:14:04+08:00">2018-12-26</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/leetCode题库笔记/" itemprop="url" rel="index"><span itemprop="name">leetCode题库笔记</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#一、题目原型：</p>
<blockquote>
<p>实现 atoi，将字符串转为整数。<br>在找到第一个非空字符之前，需要移除掉字符串中的空格字符。如果第一个非空字符是正号或负号，选取该符号，并将其与后面尽可能多的连续的数字组合起来，这部分字符即为整数的值。如果第一个非空字符是数字，则直接将其与之后连续的数字字符组合起来，形成整数。<br>字符串可以在形成整数的字符后面包括多余的字符，这些字符可以被忽略，它们对于函数没有影响。<br>当字符串中的第一个非空字符序列不是个有效的整数；或字符串为空；或字符串仅包含空白字符时，则不进行转换。<br>若函数不能执行有效的转换，返回 0。<br>说明：<br>假设我们的环境只能存储 32 位有符号整数，其数值范围是 [−231,  231 − 1]。如果数值超过可表示的范围，则返回  INT_MAX (231 − 1) 或 INT_MIN (−231) 。</p>
</blockquote>
<p>#二、题目意思剖析：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">输入: &quot;42&quot;</span><br><span class="line">输出: 42</span><br><span class="line"></span><br><span class="line">输入: &quot;   -42&quot;</span><br><span class="line">输出: -42</span><br><span class="line">解释: 第一个非空白字符为 &apos;-&apos;, 它是一个负号。</span><br><span class="line">     我们尽可能将负号与后面所有连续出现的数字组合起来，最后得到 -42 。</span><br><span class="line"></span><br><span class="line">输入: &quot;4193 with words&quot;</span><br><span class="line">输出: 4193</span><br><span class="line">解释: 转换截止于数字 &apos;3&apos; ，因为它的下一个字符不为数字。</span><br><span class="line"></span><br><span class="line">输入: &quot;words and 987&quot;</span><br><span class="line">输出: 0</span><br><span class="line">解释: 第一个非空字符是 &apos;w&apos;, 但它不是数字或正、负号。</span><br><span class="line">     因此无法执行有效的转换。</span><br><span class="line"></span><br><span class="line">输入: &quot;-91283472332&quot;</span><br><span class="line">输出: -2147483648</span><br><span class="line">解释: 数字 &quot;-91283472332&quot; 超过 32 位有符号整数范围。 </span><br><span class="line">     因此返回 INT_MIN (−231) 。</span><br></pre></td></tr></table></figure></p>
<p>1.第一个非空字符前如果有空格，去掉。<br>2.第一个非空字符只有三种选项：+  -  数字，否则返回0<br>3.接下来将连续的数字连接起来，中间不可以有除数字外的其他字符</p>
<p>#三、解题思路：<br>1.创建相应需要的变量<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let arr: [String] = [&quot;0&quot;,&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;,&quot;6&quot;,&quot;7&quot;,&quot;8&quot;,&quot;9&quot;]</span><br><span class="line">var result: Int = 0 // 最终结果</span><br><span class="line">var numbers: [String] = []</span><br><span class="line">for char in str &#123;</span><br><span class="line">    let temp: String = String.init(char)</span><br><span class="line">    numbers.append(temp)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>2.几个重要的标记<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var flag: Int = 1 // 表示最终结果(整数)的符号，默认为1</span><br><span class="line">var space: Int = -1 // 表示当前字符是否为空格，如果不等于-1，就不是空格了。</span><br><span class="line">var valid: Bool = false //表示是否出现了第一个有效的字符(+ - 或者数字)</span><br></pre></td></tr></table></figure></p>
<p>3.遍历numbers，获取最终结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">for i in 0..&lt;numbers.count &#123;</span><br><span class="line">    </span><br><span class="line">    // 1.排除空格</span><br><span class="line">    if (numbers[i] == &quot; &quot;) &amp;&amp; space == -1 &#123;</span><br><span class="line">        continue</span><br><span class="line">    &#125;else &#123;</span><br><span class="line">        space = i</span><br><span class="line">    &#125;</span><br><span class="line">    // 2.第一个非空字符字符为 数字或正、负号，将valid标记好</span><br><span class="line">    if (numbers[i] == &quot;-&quot; || numbers[i] == &quot;+&quot;) &amp;&amp; !valid&#123;</span><br><span class="line">        flag = (numbers[i] == &quot;+&quot;) ? 1 : -1</span><br><span class="line">        valid = true</span><br><span class="line">        continue</span><br><span class="line">    &#125;else if (arr .contains(numbers[i])) &#123;</span><br><span class="line">        valid = true</span><br><span class="line">        // 3.将numbers中的元素转换为int类型，将result*10叠加起来。</span><br><span class="line">        result = result*10 + Int(numbers[i])!</span><br><span class="line">        if result &gt; Int32.max &amp;&amp; flag == 1&#123;</span><br><span class="line">            result = Int(Int32.max)</span><br><span class="line">            return result</span><br><span class="line">        &#125;else if result*flag &lt;= Int32.min &amp;&amp; flag == -1&#123;</span><br><span class="line">            result = Int(Int32.min)</span><br><span class="line">            return result</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;else &#123;</span><br><span class="line">        break</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">return result * flag</span><br></pre></td></tr></table></figure></p>
<p>4.举例 ：“   –0000123”<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.前面的空格会跳过，直到第一个“-”。此时space = i，i = 3，进入下一步</span><br><span class="line">2.此时是“-”，找到了第一个有效的非空字符，valid = true，然后continue</span><br><span class="line">3.接下来是第二个“-”，但是!valid = false，不会进入</span><br><span class="line">if (numbers[i] == &quot;-&quot; || numbers[i] == &quot;+&quot;) &amp;&amp; !valid&#123;</span><br><span class="line">&#125;</span><br><span class="line">这个判断，会直接到else，会直接break，此时，result = 0</span><br></pre></td></tr></table></figure></p>
<p>#四、小结<br><img src="https://upload-images.jianshu.io/upload_images/1869467-bf9123c7a5fc4167.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="总提交数"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/1869467-8708ae67aa0e5b86.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="提交结果.png"></p>
<p>有其他好的方法请极速留言，非常乐意一起探讨。😄</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/13/leetCode题库笔记/5. 最长回文子串/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小坤">
      <meta itemprop="description" content="划水划水。。。">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="花果山松鼠’s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/07/13/leetCode题库笔记/5. 最长回文子串/" class="post-title-link" itemprop="url">5. 最长回文子串</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-07-13 14:18:12" itemprop="dateCreated datePublished" datetime="2018-07-13T14:18:12+08:00">2018-07-13</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-12-26 15:12:49" itemprop="dateModified" datetime="2018-12-26T15:12:49+08:00">2018-12-26</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/leetCode题库笔记/" itemprop="url" rel="index"><span itemprop="name">leetCode题库笔记</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#一、题目原型：</p>
<blockquote>
<p>给定一个字符串 s，找到 s 中最长的回文子串。你可以假设 s 的最大长度为1000。</p>
</blockquote>
<p>#二、题目意思剖析：<br>回文其实是对称的一个字符串。<br>比如：aba 、xyx、 mnnm、xoox 这样子。。。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">输入: &quot;babad&quot;</span><br><span class="line">输出: &quot;bab&quot;</span><br><span class="line">注意: &quot;aba&quot;也是一个有效答案。</span><br><span class="line"></span><br><span class="line">输入: &quot;cbbd&quot;</span><br><span class="line">输出: &quot;bb&quot;</span><br></pre></td></tr></table></figure></p>
<p>#三、解题思路：</p>
<p>####中心法<br>官方解释：<br>事实上，只需使用恒定的空间，我们就可以在 O(n^2) 的时间内解决这个问题。<br>我们观察到回文中心的两侧互为镜像。因此，回文可以从它的中心展开，并且只有 2n−1 个这样的中心。<br>你可能会问，为什么会是 2n−1 个，而不是 n 个中心？原因在于所含字母数为偶数的回文的中心可以处于两字母之间（例如 “abba” 的中心在两个 ‘b’ 之间）。</p>
<p>我的理解：<br>我们根据对称的这个特性，来进行查找，以一个点为中心，两个指针左右移动，如果两边对应的字母相同，那么就继续移动，直到超出边界或者两边字母不同。</p>
<p>安排：<img src="https://upload-images.jianshu.io/upload_images/1869467-986f1b7364c561a6.JPG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="笔记思路.JPG"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 返回当前回文最大的长度</span><br><span class="line">func haha(_ letters: [String],_ left: Int, _ right: Int) -&gt; (Int) &#123;</span><br><span class="line">    </span><br><span class="line">    var L:Int = left</span><br><span class="line">    var R: Int = right</span><br><span class="line">    </span><br><span class="line">    // 当左边指针不小于0，当右边指针不超过字符串长度</span><br><span class="line">    // 并且左右两个数值要相等</span><br><span class="line">    while L&gt;=0 &amp;&amp; R&lt;letters.count &amp;&amp; letters[L] == letters[R] &#123;</span><br><span class="line">        L = L - 1</span><br><span class="line">        R = R + 1</span><br><span class="line">    &#125;</span><br><span class="line">    return R - L - 1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">func longestPalindrome(_ s: String) -&gt; String &#123;</span><br><span class="line">    </span><br><span class="line">    var letters: [String] = []</span><br><span class="line">    for char in s &#123;</span><br><span class="line">        let str: String = String.init(char)</span><br><span class="line">        letters.append(str)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    var start:Int = 0</span><br><span class="line">    var end: Int = 0</span><br><span class="line">    var huiwen: String = &quot;&quot;</span><br><span class="line">    for i in 0..&lt;letters.count &#123;</span><br><span class="line">        </span><br><span class="line">        // 这分为两种情况：1.回文长度为奇数时，中心在中间那个字母</span><br><span class="line">        //              2.回文长度为偶数时，中心在两个字母之间</span><br><span class="line">        let len1: Int = haha(letters, i, i)</span><br><span class="line">        let len2: Int = haha(letters, i, i+1)</span><br><span class="line">        // 取最大值</span><br><span class="line">        let len: Int = len1 &gt; len2 ? len1 : len2</span><br><span class="line">        </span><br><span class="line">        if len &gt; end - start &#123;</span><br><span class="line">            start = i - (len - 1) / 2</span><br><span class="line">            end = i + len / 2</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    for i in start..&lt;end+1 &#123;</span><br><span class="line">        huiwen.append(letters[i])</span><br><span class="line">    &#125;</span><br><span class="line">    return huiwen</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>#四、小结<br>一切一切的算法，前提是要找到规律。然后一步一步剖析找出最好的算法。<br>在本题中，我的笔记思路只画出了一种情况，还有另一种情况就是回文长度为偶数时，中心在两个字母之间，也是一样的规律去找。最后比较这两种情况，找出最大值就行了。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1869467-45e06cea14dd09e9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="总提交数.png"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/1869467-b034054d7e700549.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="提交结果.png"></p>
<p>有其他好的方法请极速留言，非常乐意一起探讨。😄</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/10/leetCode题库笔记/3.无重复字符的最长子串/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小坤">
      <meta itemprop="description" content="划水划水。。。">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="花果山松鼠’s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/07/10/leetCode题库笔记/3.无重复字符的最长子串/" class="post-title-link" itemprop="url">3.无重复字符的最长子串</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-07-10 17:52:12" itemprop="dateCreated datePublished" datetime="2018-07-10T17:52:12+08:00">2018-07-10</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-12-26 15:09:25" itemprop="dateModified" datetime="2018-12-26T15:09:25+08:00">2018-12-26</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/leetCode题库笔记/" itemprop="url" rel="index"><span itemprop="name">leetCode题库笔记</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#一、题目原型：</p>
<blockquote>
<p>给定一个字符串，找出不含有重复字符的最长子串的长度。</p>
</blockquote>
<p>#二、题目意思剖析：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">给定 &quot;abcabcbb&quot; ，没有重复字符的最长子串是 &quot;abc&quot; ，那么长度就是3。</span><br><span class="line"></span><br><span class="line">给定 &quot;bbbbb&quot; ，最长的子串就是 &quot;b&quot; ，长度是1。</span><br><span class="line"></span><br><span class="line">给定 &quot;pwwkew&quot; ，最长子串是 &quot;wke&quot; ，长度是3。请注意答案必须是一个子串，&quot;pwke&quot; 是 子序列  而不是子串。</span><br></pre></td></tr></table></figure></p>
<p>#三、解题思路：</p>
<p>####3.1暴力破解<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 分析</span><br><span class="line">// abcabcdb</span><br><span class="line">//    abcd -- 答案</span><br><span class="line">a          b           c            a           b</span><br><span class="line">ab         bc          ca           ab          bc</span><br><span class="line">abc  3     bca  3      cab  3       abc         bcd  3</span><br><span class="line">abca ❌    bcab ❌    cabc ❌      abcd  4     bcdb  ❌</span><br><span class="line">                                    abcdb ❌</span><br><span class="line">// 1.找出每次遍历时当前string的最长substring，当然不能出现重复的字母</span><br><span class="line">// 2.从中拿到最长的</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">// 上代码</span><br><span class="line">// 注：resultLength是个全局变量</span><br><span class="line">func lengthOfLongestSubstring(_ s: String) -&gt; Int &#123;</span><br><span class="line">    </span><br><span class="line">    if s.count &lt;= 1 &#123;</span><br><span class="line">        print(s)</span><br><span class="line">        return s.count</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    var letters: [Character] = []</span><br><span class="line">    for char in s &#123;</span><br><span class="line">        letters .append(char)</span><br><span class="line">    &#125;</span><br><span class="line">      print(letters)</span><br><span class="line">    </span><br><span class="line">    var subString: String = &quot;&quot;</span><br><span class="line">    var maxLength: Int = 1</span><br><span class="line">    for i in 0..&lt;letters.count - 1 &#123;</span><br><span class="line">        </span><br><span class="line">        subString .append(letters[i])</span><br><span class="line">        for j in i+1..&lt;letters.count &#123;</span><br><span class="line">            if !subString .contains(letters[j]) &#123;</span><br><span class="line">                subString .append(letters[j])</span><br><span class="line">                maxLength = maxLength + 1</span><br><span class="line">                // 用全局变量resultLength保存最大的长度</span><br><span class="line">                resultLength = maxLength &gt; resultLength ? maxLength : resultLength</span><br><span class="line">            &#125;else &#123;</span><br><span class="line">                  print(subString)</span><br><span class="line">                  print(maxLength)</span><br><span class="line">                // 用全局变量resultLength保存最大的长度</span><br><span class="line">                resultLength = maxLength &gt; resultLength ? maxLength : resultLength</span><br><span class="line">                subString .removeAll()</span><br><span class="line">                maxLength = 1</span><br><span class="line">                break</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        // 如果 resultLength和i 相加刚好等于letters.count - 1，就不需要再进行下面的遍历了。</span><br><span class="line">        // 因为此时的resultLength的长度是最长的了</span><br><span class="line">        if i + resultLength == (letters.count - 1) &#123;</span><br><span class="line">            break</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return resultLength</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>####3.2滑动窗口<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">func lengthOfLongestSubstring(_ s: String) -&gt; Int &#123;</span><br><span class="line">    let n = s.count</span><br><span class="line">    var letters: [String] = []</span><br><span class="line">    for char in s &#123;</span><br><span class="line">        let tempStr: String = String.init(char)</span><br><span class="line">        letters .append(tempStr)</span><br><span class="line">    &#125;</span><br><span class="line">    // 1.如果s长度 &lt;= 1</span><br><span class="line">    if s.count &lt;= 1 &#123;</span><br><span class="line">        print(s)</span><br><span class="line">        return s.count</span><br><span class="line">    &#125;</span><br><span class="line">    var set: [String] = Array.init(repeating: &quot;&quot;, count: letters.count)</span><br><span class="line">    var start: Int = 0 // 起始位置</span><br><span class="line">    var end: Int = 0   // 结束位置</span><br><span class="line">    var maxLength: Int = 0  // 最大长度</span><br><span class="line">    while start&lt;n &amp;&amp; end&lt;n &#123;</span><br><span class="line">        maxLength = (end - start + 1) &gt; maxLength ? (end - start + 1) : maxLength</span><br><span class="line">        if set.contains(letters[end]) &#123;</span><br><span class="line">            let index: Int = set.index(of: letters[end])!</span><br><span class="line">            // 1.start移动到上次出现重复位置的后一位</span><br><span class="line">            start = index + 1</span><br><span class="line">            // 2.短遍历，将前面遍历完的字符串置为空</span><br><span class="line">            for i in tempStart..&lt;start &#123;</span><br><span class="line">                if set[i] != &quot;&quot; &#123;</span><br><span class="line">                    set[i] = &quot;&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            // 3.tempStart作用：记录上一次start位置</span><br><span class="line">            tempStart = start</span><br><span class="line">            // 4.当发现重复字符，maxLength需要-1</span><br><span class="line">            maxLength = maxLength - 1</span><br><span class="line">        &#125;</span><br><span class="line">        set[end] = letters[end]</span><br><span class="line">        end = end + 1</span><br><span class="line">        print(&quot;start-\(start) end-\(end) maxLength-\(maxLength)&quot;)</span><br><span class="line">        // 最终最大长度</span><br><span class="line">        resultLength = maxLength &gt; resultLength ? maxLength : resultLength</span><br><span class="line">    &#125;</span><br><span class="line">    return resultLength</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>#四、小结<br>暴力破解：时间复杂度o(n的平方)<br>滑动窗口：时间复杂度o(n*一个常数)<br><a href="http://baijiahao.baidu.com/s?id=1596959005481205984&amp;wfr=spider&amp;for=pc" target="_blank" rel="noopener">滑动窗口参考资料，这里边有详细图解</a></p>
<p>由于时间复杂度太高了，没有通过leetcode检测，超时了。😭<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// leetcode测试用例</span><br><span class="line">var s:String = &quot;&quot;</span><br><span class="line">for _ in 0..&lt;100 &#123;</span><br><span class="line">    s .append(&quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!\&quot;#$%&amp;&apos;()*+,-./:;&lt;=&gt;?@[\\]^_`&#123;|&#125;~ &quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>不同区间的耗时统计:<br>0..&lt;10   - 284ms<br>0..&lt;20   - 960ms<br>0..&lt;50   - 5.7s<br>0..&lt;100 - 20s</p>
<p>ps：当区间为[0,100]，耗时简直恐怖。。。</p>
<p>—————————————分割线————————————-<br>经过多方查找，和自己验证，果断找到了一种办法。</p>
<p>####用hash值。<br>因为每个字符只对应一个hash值。但是swift的这个值和c++或者java又有所不同。他们之间的差值不同。</p>
<p>####验证:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">将所有字符都列出来，比较找出最大最小的hash值和对应的字符。</span><br><span class="line">var s:String = &quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!\&quot;#$%&amp;&apos;()*+,-./:;&lt;=&gt;?@[\\]^_`&#123;|&#125;~ &quot;</span><br><span class="line">var characters:[String] = []</span><br><span class="line">for char in s &#123;</span><br><span class="line">    let string:String = String.init(char)</span><br><span class="line">    characters.append(string)</span><br><span class="line">&#125;</span><br><span class="line">var max: Int = 0</span><br><span class="line">var min: Int = Int.max</span><br><span class="line">for i in 0..&lt;characters.count &#123;</span><br><span class="line">    if (characters[i].hashValue &gt; max) &#123;</span><br><span class="line">        max = characters[i].hashValue</span><br><span class="line">        print(&quot;max:\(max), characters[i]:\(characters[i]) ,i:\(i)&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">    if (characters[i].hashValue &lt; min) &#123;</span><br><span class="line">        min = characters[i].hashValue</span><br><span class="line">        print(&quot;min:\(min), characters[i]:\(characters[i]) ,i:\(i)&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>结果：<br>max: I   4799450059485597695<br>min: _   4799450059485595649<br>差值：2046</p>
<p>然后就简单了，之前一直卡在越界问题上<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">func lengthOfLongestSubstring(_ s: String) -&gt; Int &#123;</span><br><span class="line">    </span><br><span class="line">    var last:[Int] = Array.init(repeating: -1, count: 2047)</span><br><span class="line">    var start: Int = 0 // 起始位置</span><br><span class="line">    var maxLength: Int = 0  // 最大长度</span><br><span class="line">    var characters:[String] = []</span><br><span class="line">    </span><br><span class="line">    for char in s &#123;</span><br><span class="line">        let string:String = String.init(char)</span><br><span class="line">        characters.append(string)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    for i in 0..&lt;characters.count &#123;</span><br><span class="line">        </span><br><span class="line">        let hash_i: Int = characters[i].hashValue</span><br><span class="line">        let hash_a: Int = &quot;_&quot;.hashValue</span><br><span class="line">        </span><br><span class="line">        if (last[hash_i - hash_a] &gt;= start) &#123;</span><br><span class="line">            maxLength = max(maxLength, i-start)</span><br><span class="line">            start = last[hash_i - hash_a] + 1</span><br><span class="line">        &#125;</span><br><span class="line">        last[hash_i - hash_a] = i</span><br><span class="line">    &#125;</span><br><span class="line">    maxLength = max(maxLength, s.count - start)</span><br><span class="line">    return maxLength</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>奇迹出现：耗时6ms！几千倍的差距。</p>
<p>然而leetcode还是没通过，说我越界了，我特么。。。自己运行没问题啊<img src="https://upload-images.jianshu.io/upload_images/1869467-a381f78813e255e5.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>然后我申诉了该题目。😏</p>
<p>—————————————分割线————————————-</p>
<p>在做<a href="https://www.jianshu.com/p/31ef441e3be3" target="_blank" rel="noopener">387.字符串中的第一个唯一字符</a>时，我发现了如果用hash值是会越界的，在leetcode上是会这样。那我们可以用ASCII码来搞，因为每一个字符只对应一个ASCII码。<br>可以参照<a href="http://ascii.911cha.com" target="_blank" rel="noopener">ASCII码对照表</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">abcdefghijklmnopqrstuvwxyz   97~122</span><br><span class="line">ABCDEFGHIJKLMNOPQRSTUVWXYZ   65~90</span><br><span class="line">0123456789                   48~57</span><br><span class="line">!\&quot;#$%&amp;&apos;()*+,-./             33~47</span><br><span class="line">:;&lt;=&gt;?                       58~64</span><br><span class="line">@[\\]^_`                     91~96</span><br><span class="line">&#123;|&#125;~                         123~126</span><br><span class="line">&quot; &quot;                          32</span><br><span class="line">空字符                        0</span><br></pre></td></tr></table></figure></p>
<p>接下来，只要把hashValue换一下就OK了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 所有字符的所对应的ASCII码，用CChar类型表示，实质为Int8类型。</span><br><span class="line">// 该方法末尾会默认加上一个&quot;0&quot;元素，也就是空字符</span><br><span class="line">var allCharacter: [Int8]? =</span><br><span class="line">&quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!\&quot;#$%&amp;&apos;()*+,-./:;&lt;=&gt;?@[\\]^_`&#123;|&#125;~ &quot;.cString(using: String.Encoding.utf8)</span><br><span class="line">print(allCharacter)</span><br><span class="line">print(allCharacter?.count)</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">func lengthOfLongestSubstring(_ s: String) -&gt; Int &#123;</span><br><span class="line">    </span><br><span class="line">    var last:[Int] = Array.init(repeating: -1, count: 127)</span><br><span class="line">    var start: Int = 0 // 起始位置</span><br><span class="line">    var maxLength: Int = 0  // 最大长度</span><br><span class="line">    </span><br><span class="line">    let chars: [Int8]? = s.cString(using: String.Encoding.utf8)</span><br><span class="line">    </span><br><span class="line">    for i in 0..&lt;s.count &#123;</span><br><span class="line">        </span><br><span class="line">        let hash_i: Int = Int(chars![i])</span><br><span class="line">        let hash_null: Int = 0</span><br><span class="line">        </span><br><span class="line">        if (last[hash_i - hash_null] &gt;= start) &#123;</span><br><span class="line">            maxLength = max(maxLength, i-start)</span><br><span class="line">            start = last[hash_i - hash_null] + 1</span><br><span class="line">        &#125;</span><br><span class="line">        last[hash_i - hash_null] = i</span><br><span class="line">    &#125;</span><br><span class="line">    maxLength = max(maxLength, s.count - start)</span><br><span class="line">    return maxLength</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>#后记<br>这一题和<a href="https://www.jianshu.com/p/31ef441e3be3" target="_blank" rel="noopener">387.字符串中的第一个唯一字符</a>思路大致相同，不太清楚的可以先看一下那题。<br>1.耗时<code>44</code>毫秒，超过<code>99.35%</code>的提交记录，总提交数<code>987</code>。</p>
<p>这一题总算告一段落了。<br>大家有疑惑的地方欢迎一起探讨啊。😄</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/09/leetCode题库笔记/4. 两个排序数组的中位数/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小坤">
      <meta itemprop="description" content="划水划水。。。">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="花果山松鼠’s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/07/09/leetCode题库笔记/4. 两个排序数组的中位数/" class="post-title-link" itemprop="url">4. 两个排序数组的中位数</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-07-09 09:54:12" itemprop="dateCreated datePublished" datetime="2018-07-09T09:54:12+08:00">2018-07-09</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-12-26 15:10:09" itemprop="dateModified" datetime="2018-12-26T15:10:09+08:00">2018-12-26</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/leetCode题库笔记/" itemprop="url" rel="index"><span itemprop="name">leetCode题库笔记</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#一、题目原型：</p>
<blockquote>
<p>给定两个大小为 m 和 n 的有序数组 nums1 和 nums2 。<br>请找出这两个有序数组的中位数。要求算法的时间复杂度为 O(log (m+n)) 。</p>
</blockquote>
<p>#二、题目意思剖析：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">nums1 = [1, 3]</span><br><span class="line">nums2 = [2]</span><br><span class="line">中位数是 2.0</span><br><span class="line"></span><br><span class="line">nums1 = [1, 2]</span><br><span class="line">nums2 = [3, 4]</span><br><span class="line">中位数是 (2 + 3)/2 = 2.5</span><br></pre></td></tr></table></figure></p>
<p>#三、解题思路：<br>1.先将数组排好序<br>2.如果数组count是奇数，那中间那位数（count / 2）就是中位数。<br>3.如果数组count是偶数，那中位数 = （第(count / 2) - 1  +  第(count / 2)）/  2<br>例子：<br>[20、21、23、23、25、29、32]<br>7 / 2 = 3，中位数 = 23<br>[20、21、23、23、25、29、32、33]<br>8 / 2 = 4，中位数 =（23+25）/ 2<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">func findMedianSortedArrays(_ nums1: [Int], _ nums2: [Int]) -&gt; Double &#123;</span><br><span class="line">    var nums: [Int] = []</span><br><span class="line">    var result: Double = 0</span><br><span class="line">    for i in 0..&lt;nums1.count &#123;</span><br><span class="line">        nums .append(nums1[i])</span><br><span class="line">    &#125;</span><br><span class="line">    for i in 0..&lt;nums2.count &#123;</span><br><span class="line">        nums .append(nums2[i])</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    nums.sort()</span><br><span class="line">    print(nums)</span><br><span class="line">    </span><br><span class="line">    if nums.count % 2 == 0 &#123; //偶数</span><br><span class="line">       </span><br><span class="line">        let num1: Int = nums[nums.count / 2 - 1]</span><br><span class="line">        let num2: Int = nums[nums.count / 2]</span><br><span class="line">        result = Double(Double(num1 + num2) / 2)</span><br><span class="line">    &#125;else if nums.count % 2 != 0 &#123; // 奇数</span><br><span class="line">        result = Double(nums[nums.count / 2])</span><br><span class="line">    &#125;</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>#四、小结</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1869467-12998bc966df761f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="总通过数.png"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/1869467-8cd761250d063079.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="提交结果.png"></p>
<p>其实这是想到的最简答的方法，耗时会偏长，大家有好的想法可以留言啊，我暂时就没去深究了，继续下题下题。。。</p>
<p>有任何疑问都可以留言，非常乐意一起探讨。😄</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/06/leetCode题库笔记/2. 两数相加/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小坤">
      <meta itemprop="description" content="划水划水。。。">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="花果山松鼠’s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/07/06/leetCode题库笔记/2. 两数相加/" class="post-title-link" itemprop="url">2. 两数相加</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-07-06 17:40:12" itemprop="dateCreated datePublished" datetime="2018-07-06T17:40:12+08:00">2018-07-06</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-12-26 15:09:00" itemprop="dateModified" datetime="2018-12-26T15:09:00+08:00">2018-12-26</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/leetCode题库笔记/" itemprop="url" rel="index"><span itemprop="name">leetCode题库笔记</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#一、题目原型：</p>
<blockquote>
<p>给定两个非空链表来表示两个非负整数。位数按照逆序方式存储，它们的每个节点只存储单个数字。将两数相加返回一个新的链表。<br>你可以假设除了数字 0 之外，这两个数字都不会以零开头。</p>
</blockquote>
<p>#二、题目意思剖析：<br>将数字反过来，再相加，然后再逆序存起来。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：(2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)</span><br><span class="line">输出：7 -&gt; 0 -&gt; 8</span><br><span class="line">原因：342 + 465 = 807</span><br></pre></td></tr></table></figure></p>
<p>#三、解题思路：</p>
<p>####官方解析：<br>1.将当前节点初始化为返回列表的哑节点。<br>2.将进位 carry 初始化为 0。<br>3.将 p 和 q 分别初始化为列表 l1 和 l2 的头部。<br>4.遍历列表 l1和 l2 直至到达它们的尾端。<br>5.将 x 设为节点 p 的值。如果 p 已经到达 l1的末尾，则将其值设置为0。<br>6.将 y 设为节点 q 的值。如果 q 已经到达 l2 的末尾，则将其值设置为0。<br>7.设定 sum=x+y+carry。更新进位的值，carry=sum/10。<br>8.创建一个数值为 (sum余10) 的新节点，并将其设置为当前节点的下一个节点，然后将当前节点前进到下一个节点。<br>9.同时，将 p 和 q 前进到下一个节点。检查 carry=1 是否成立，如果成立，则向返回列表追加一个含有数字 1 的新节点。返回哑节点的下一个节点。</p>
<p>####我的理解：<br>其实由繁化简来说，就是保存sum的余数和sum的除数，也就是看看它是否超过了10，这有一个特殊处理。<br>比如 5 + 8 = 13，13 / 10 = 1，13 % 10 = 3。那其实就变成了3 -&gt; 1<br>curr是先加余数，再加进位的那个1。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1869467-b6cfd1a77cafde31.JPG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="思路"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 1.链表构造</span><br><span class="line">public class ListNode &#123;</span><br><span class="line">    public var val: Int</span><br><span class="line">    public var next: ListNode?</span><br><span class="line">    public init(_ val: Int) &#123;</span><br><span class="line">        self.val = val</span><br><span class="line">        self.next = nil</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">func addTwoNumbers(_ l1: ListNode?, _ l2: ListNode?) -&gt; ListNode? &#123;</span><br><span class="line">    </span><br><span class="line">    let dummyHead: ListNode? = ListNode.init(0)</span><br><span class="line">    var p: ListNode? = l1</span><br><span class="line">    var q: ListNode? = l2</span><br><span class="line">    var curr: ListNode? = dummyHead</span><br><span class="line">    </span><br><span class="line">    var carray: Int = 0</span><br><span class="line">    while (p != nil) || (q != nil) &#123;</span><br><span class="line">        let x: Int = (p != nil) ? (p?.val)! : 0</span><br><span class="line">        let y: Int = (q != nil) ? (q?.val)! : 0</span><br><span class="line">        let sum: Int = carray + x + y</span><br><span class="line">        carray = sum / 10</span><br><span class="line">        curr?.next = ListNode.init(sum % 10)</span><br><span class="line">        curr = curr?.next</span><br><span class="line">        if (p != nil) &#123;</span><br><span class="line">            p = p?.next</span><br><span class="line">        &#125;</span><br><span class="line">        if (q != nil) &#123;</span><br><span class="line">            q = q?.next</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if carray &gt; 0 &#123;</span><br><span class="line">        curr?.next = ListNode.init(carray)</span><br><span class="line">    &#125;</span><br><span class="line">    return dummyHead?.next</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>#四、小结<br>有时候抓住关键点就可以一击突破。这题的关键就在于处理sum的余数和除数。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1869467-5a4335e45978b729.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="总提交数.png"><br><img src="https://upload-images.jianshu.io/upload_images/1869467-cabd258a839980c2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="提交结果.png"></p>
<p>有任何疑问都可以留言，非常乐意一起探讨。😄</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/06/leetCode题库笔记/1. 两数之和/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小坤">
      <meta itemprop="description" content="划水划水。。。">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="花果山松鼠’s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/07/06/leetCode题库笔记/1. 两数之和/" class="post-title-link" itemprop="url">1. 两数之和</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-07-06 15:36:12" itemprop="dateCreated datePublished" datetime="2018-07-06T15:36:12+08:00">2018-07-06</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-12-26 15:08:27" itemprop="dateModified" datetime="2018-12-26T15:08:27+08:00">2018-12-26</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/leetCode题库笔记/" itemprop="url" rel="index"><span itemprop="name">leetCode题库笔记</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#一、题目原型：</p>
<blockquote>
<p>给定一个整数数组和一个目标值，找出数组中和为目标值的两个数。<br>你可以假设每个输入只对应一种答案，且同样的元素不能被重复利用。</p>
</blockquote>
<p>#二、题目意思剖析：<br>从数组里找出两个数，加起来=目标值，返回两个数的位置。<br>当然可能有非常多的两个数组合，所以需要将所有情况都返回。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">给定 nums = [2, 7, 11, 15], target = 9</span><br><span class="line">因为 nums[0] + nums[1] = 2 + 7 = 9</span><br><span class="line">所以返回 [0, 1]</span><br></pre></td></tr></table></figure></p>
<p>#三、解题思路：<br>直接用两个for 循环暴力破解。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 暴力破解法 : 时间复杂度O(n的平方) 空间复杂度O(1)，因为只创建了一次变量someInts。</span><br><span class="line">func twoSum(_ nums: [Int], _ target: Int) -&gt; [Int] &#123;</span><br><span class="line">    </span><br><span class="line">    var someInts = [Int]()</span><br><span class="line">    for i in 0..&lt;nums.count &#123;</span><br><span class="line">        for j in i+1..&lt;nums.count &#123;</span><br><span class="line">            if nums[i]+nums[j] == target &#123;</span><br><span class="line">                someInts += [i]</span><br><span class="line">                someInts += [j]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return someInts</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>#四、小结<br>这题比较简单，从前往后数，相加之后进行比对。<br><img src="https://upload-images.jianshu.io/upload_images/1869467-162fe059185efee4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="总提交数.png"><br><img src="https://upload-images.jianshu.io/upload_images/1869467-6b6469661451564e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="提交结果.png"></p>
<p>有任何疑问都可以留言，非常乐意一起探讨。😄</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/05/leetCode题库笔记/17.电话号码的字母组合/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小坤">
      <meta itemprop="description" content="划水划水。。。">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="花果山松鼠’s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/07/05/leetCode题库笔记/17.电话号码的字母组合/" class="post-title-link" itemprop="url">17.电话号码的字母组合</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-07-05 20:02:12" itemprop="dateCreated datePublished" datetime="2018-07-05T20:02:12+08:00">2018-07-05</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-12-26 15:17:30" itemprop="dateModified" datetime="2018-12-26T15:17:30+08:00">2018-12-26</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/leetCode题库笔记/" itemprop="url" rel="index"><span itemprop="name">leetCode题库笔记</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#一、题目原型：</p>
<blockquote>
<p>给定一个仅包含数字 2-9 的字符串，返回所有它能表示的字母组合。<br>给出数字到字母的映射如下（与电话按键相同）。注意 1 不对应任何字母。</p>
</blockquote>
<p><img src="https://upload-images.jianshu.io/upload_images/1869467-0cb3d33198ad2914.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="电话按键"></p>
<p>#二、题目意思剖析：<br>其实呢就是一个排列组合，将字母按照有序的顺序组合起来。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">    2-abc</span><br><span class="line">    3-def</span><br><span class="line">    4-ghi</span><br><span class="line">    5-jkl</span><br><span class="line">    6-mno</span><br><span class="line">    7-pqrs</span><br><span class="line">    8-tuv</span><br><span class="line">    9-wxyz</span><br><span class="line"> </span><br><span class="line">   输入：&quot;23&quot;</span><br><span class="line">   输出：[&quot;ad&quot;, &quot;ae&quot;, &quot;af&quot;, &quot;bd&quot;, &quot;be&quot;, &quot;bf&quot;, &quot;cd&quot;, &quot;ce&quot;, &quot;cf&quot;].</span><br><span class="line">   如果输入的是 245</span><br><span class="line">   输出：[&quot;agj&quot;, &quot;agk&quot;, &quot;agl&quot;, &quot;ahj&quot;, &quot;ahk&quot;, &quot;ahl&quot;, &quot;aij&quot;, &quot;aik&quot;, &quot;ail&quot;......</span><br><span class="line"> */</span><br></pre></td></tr></table></figure></p>
<p>#三、解题思路：<br>我呢是用swift语法来做，但是逻辑思路都是相通的。<br>第一想到的应该是递归。通过递归，再加上一些判断条件，将对应的字符串加入进数组。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 1.最外围的主方法</span><br><span class="line">func letterCombinations(_ digits: String) -&gt; [String] &#123;</span><br><span class="line">    if digits.isEmpty &#123;</span><br><span class="line">        return []</span><br><span class="line">    &#125;</span><br><span class="line">    //  由于swift语法特性，需要将digits字符串包装为一个数组</span><br><span class="line">    var strings: [String] = []</span><br><span class="line">    for digit in digits &#123;</span><br><span class="line">        let str: String = String.init(digit)</span><br><span class="line">        strings .append(str)</span><br><span class="line">    &#125;</span><br><span class="line">    haha(strings,0)</span><br><span class="line">    return result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">// 2.核心代码实现</span><br><span class="line">func haha(_ strings: [String], _ index: Int) &#123;</span><br><span class="line">    if str.count == strings.count &#123;</span><br><span class="line">        result .append(str)</span><br><span class="line">        return</span><br><span class="line">    &#125;</span><br><span class="line">    // 防止数组越界</span><br><span class="line">    if index &gt;= strings.count &#123;</span><br><span class="line">        return</span><br><span class="line">    &#125;</span><br><span class="line">    // 1.首先我们需要一个电话号码base数组。</span><br><span class="line">    let bases: [[String]] = [[&quot;&quot;],[&quot;&quot;],[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;],[&quot;d&quot;,&quot;e&quot;,&quot;f&quot;],[&quot;g&quot;,&quot;h&quot;,&quot;i&quot;],[&quot;j&quot;,&quot;k&quot;,&quot;l&quot;],[&quot;m&quot;,&quot;n&quot;,&quot;o&quot;],[&quot;p&quot;,&quot;q&quot;,&quot;r&quot;,&quot;s&quot;],[&quot;t&quot;,&quot;u&quot;,&quot;v&quot;],[&quot;w&quot;,&quot;x&quot;,&quot;y&quot;,&quot;z&quot;]]</span><br><span class="line">    // 2.通过index索引将strings对应的字符串元素转换为Int类型的索引</span><br><span class="line">    // baseIndex : 电话号码(数字)索引,比如strings=[&quot;2&quot;,&quot;4&quot;,&quot;5&quot;],baseIndex就是2,4,5</span><br><span class="line">    let baseIndex: Int = (Int)(strings[index])!</span><br><span class="line">    for i in 0..&lt;bases[baseIndex].count &#123;</span><br><span class="line">        // 拿到子数组里对应的字母</span><br><span class="line">        let baseStr: String = bases[baseIndex][i]</span><br><span class="line">        // 1.如果当前正在添加第一个字母,就将str清空</span><br><span class="line">        if index == 0 &#123;</span><br><span class="line">            str .removeAll()</span><br><span class="line">        &#125;</span><br><span class="line">        /* 2.如果当前正在添加最后一个字母,并且不是第一个字母串,就删除str的最后一个字符</span><br><span class="line">             比如index = 2,说明在添加第三个字母，如果i不等于0，就需要把最后一个字母删除。</span><br><span class="line">             &quot;agj&quot;, &quot;agk&quot;, &quot;agl&quot;</span><br><span class="line">             过程 : agj - ag - agk - ag - agl</span><br><span class="line">         */</span><br><span class="line">        else if index == strings.count - 1 &amp;&amp; i != 0&#123;</span><br><span class="line">            str .removeLast()</span><br><span class="line">        &#125;</span><br><span class="line">        else &#123;</span><br><span class="line">            // 3.如果str不为空，需要删除字母串的后面几位，通过index来设定</span><br><span class="line">            // 用str的长度 - index得到后面需要删除的长度</span><br><span class="line">            // &quot;jmpt&quot;, &quot;jmpu&quot;, &quot;jmpv&quot;, &quot;jmqt&quot;, &quot;jmqu&quot;, &quot;jmqv&quot;, &quot;jmrt&quot;, &quot;jmru&quot;, &quot;jmrv&quot;, &quot;jmst&quot;, &quot;jmsu&quot;, &quot;jmsv</span><br><span class="line">            </span><br><span class="line">            // 比如当前字符串为 jmrv，index为2，就需要删除后面 4 - 2 = 2，删除后面2位。</span><br><span class="line">            // baseStr为s，然后接下来的baseStr为t。</span><br><span class="line">            // 过程 : jmrv - jm - jms - jmst</span><br><span class="line">            if !str.isEmpty &#123;</span><br><span class="line">                str .removeLast(str.count - index)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        str .append(baseStr)</span><br><span class="line">        haha(strings, index + 1)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>#四、小结<br>有时候这类题都是去找规律，我们需要把一些例子所得到的数据展示出来，然后去寻找规律，让计算的过程直观的表达出来。<br>注：可以在haha方法里加入一个indexs数组，result也不要限定条件来添加，然后直接在letterCombinations方法里打印出indexs和result的值。这样可以非常直观的查看添加过程。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">func haha(_ strings: [String], _ index: Int) &#123;</span><br><span class="line">    indexs .append(index)</span><br><span class="line">    result .append(str)</span><br><span class="line">    、、、后面的代码不变</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><img src="https://upload-images.jianshu.io/upload_images/1869467-699c02b94608c237.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="总提交数.png"><br><img src="https://upload-images.jianshu.io/upload_images/1869467-424a9f5580170199.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="提交结果.png"></p>
<p>有任何疑问都可以留言，非常乐意一起探讨。😄</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/11/旅行/东西涌穿越官方攻略/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小坤">
      <meta itemprop="description" content="划水划水。。。">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="花果山松鼠’s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/06/11/旅行/东西涌穿越官方攻略/" class="post-title-link" itemprop="url">东西涌穿越官方攻略</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-06-11 10:38:12" itemprop="dateCreated datePublished" datetime="2018-06-11T10:38:12+08:00">2018-06-11</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-12-26 15:33:59" itemprop="dateModified" datetime="2018-12-26T15:33:59+08:00">2018-12-26</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/旅行/" itemprop="url" rel="index"><span itemprop="name">旅行</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##一、收拾行囊(物品准备)<br>时间：最好在出发的前一天晚上准备好<br>装备：<br>1、穿戴： 帽子、头巾(围脖、护脸多功能使用)、护臂(直接淘宝搜护肘护臂)、手套(防滑的就行)、太阳镜(可以考虑带，很帅)、衣服带两套(长裤一条、短袖两件)、运动鞋一双、拖鞋一双(可以考虑带)、泳裤一条、沙滩裤(短裤)一条、不会游泳的那边有泳圈租10元一个、一把伞(防晒、防雨)<br>2、药品：扭伤药系列(防止有人意外扭伤，及时处理)、花露水(要穿越树林和一些茂密的草丛，驱蚊止痒)、然后防晒霜啥的(男孩子就别带了，做好上面的穿戴就没事)。<br>3、吃喝：1袋面包(不需要太多，5个就够了)、4个煌上煌鸭架(补充盐分)、4根黄瓜(4根真的不多，你相信那几根黄瓜是我吃过最好吃的黄瓜吗)、2瓶2元怡宝水、1瓶盐水 (注–以上说的吃喝，是一个人的分量哦，水最好都带冰的，解渴)<br>4、报备：可以提前在<a href="https://dp.coolcar365.com/wtt/home/outing/outing?from=singlemessage&amp;isappinstalled=0" target="_blank" rel="noopener">网上报备</a>，也可以现场报备，其实就是登记一下。</p>
<p>差不多就这些，如果还有遗漏的，再及时补充。</p>
<p>##二、出发<br>起点：早上5点半起床，洗漱收拾东西差不多10-15分钟，5:45在楼下直接拦了辆车（早上出租车还是挺多的），几分钟就到了深圳北站交通枢纽公交站。问了下路，坐E11路是在二楼。差不多在6点前就到了，这时是可以赶上第一班的。不过我那朋友迟到了，最后我们坐的6点半那车。<br>定位目的地技巧：直接在百度地图搜索E11路，直接会有一个起点终点，找到深圳北站交通枢纽公交站，点击然后点击到这去，直接导航。从我民乐新村(地铁4号线民乐站附近)这到那边不到五公里，开车花了10分钟不到。<br><img src="https://upload-images.jianshu.io/upload_images/1869467-b325248dc0872e3f.JPG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="起点.JPG"></p>
<p>坐车：坐E11到 (南澳街道办站) 下车，然后在南澳街道办站等车。<br>1.如果你要去东涌，就做M231，到终点站东涌浴场下车；<br>2.如果去西涌，就做M232，到西涌三四号浴场下车（其实后面那几站都行，西涌海岸线简直太美了，又比较长，到哪下都行，不要去终点站西涌西贡村就行。）<br>坐车时间：6点半上车，8点25到南澳街道办，南澳街道办坐车到东涌/西冲大概20-30分钟。总体时间：2个半小时左右。<br>ps：最好下一个叫做“车来了”的app，这样方便很多。</p>
<p>##三、路线建议：东涌 到 西涌<br>到了南澳街道办，就直接坐M231去东涌。不要进去东涌浴场，切记切记！！！那里完全和西涌浴场没法比，只有西涌海岸线长的四分之一可能更少，价格却是20元一人，西涌是13。<br>到了终点站，直接下车往东涌码头走，那边有一座桥，百度地图没更新，大概在这个位置。<br><img src="https://upload-images.jianshu.io/upload_images/1869467-31bf4e249e29ad56.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="东涌码头.png"></p>
<p>桥的那边会有人守着，你需要登记一下(报备)。<br>过桥沿着土路（能容纳一辆车的路）一直走，看到一个小亭子(铁皮房)，里面有人吹着空调(可能也不在)，不用管他。直接往左转上山，此时沿着路走你就开始穿越啦。</p>
<p>##四、正式穿越<br>时间控制：穿越时间3小时<br>穿越时间一般在3-5小时之间。我们是两个人(男孩)，行动力比较强，从报备登记完到目的地差不多花了3个小时，包括了中间休息的时间。中间休息大概在8-10次，每次3-5分钟，如果坚持不了，就找一个就近的地方休息，最好是有遮阴的地方。喝口水、多做深呼吸，慢慢走不要急。<br>路就一直跟着海岸线走就行了，有些很陡峭，有些很平坦，在岩石上跳来跳去要小心，不要扭到脚，注意安全，如果队伍里有女生，最好有几个男孩子带着，慢慢走。放几张图，你们感受下。<br><img src="https://upload-images.jianshu.io/upload_images/1869467-3c1aef4f370e7d38.JPG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="山石"><br><img src="https://upload-images.jianshu.io/upload_images/1869467-5421086276cdc6ff.JPG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="峭壁"><br>有些困难，这样就会有挑战性，人活着就需要做一些自己不一定能完全做好的事，这样才会有意义，这段记忆会一直存储在你的记忆里，经久不息。</p>
<p>##五、东西涌路线选择<br>1、东西冲穿越：如果你要爬山穿越（很苦的，脚会很酸，有些地方很陡峭，要注意安全），累但是很有意义。<br>2、如果不穿越，单纯的是想去海边玩玩，看看干净的海水，看看日出，踩着沙子看着心爱的人的笑容，那就完全可以直接坐M232去西涌。(海边小屋我问了，双人床一晚238，两张床一晚338，需要电话的话留言，我不是打广告的坚决不是，因为那个要提前预定，火爆期真的怕订不到。也可以自己带帐篷，在那搭着睡)<br>西涌是真的好看，好几公里的海岸线，延绵无尽。海水清澈见底，沙子柔软，你可以光着脚踩着沙子慢慢走，也可以租一个太阳伞在那躺着坐着，一天感觉就会过得很缓慢，听着海浪的拍打声，陪着自己的家人开开心心的，一切就真的很美好，其实这就是幸福生活了吧。也是自己一个人偶尔放松放松、放空自己的非常好的去处。<br>额，我不会游泳，怕吃海水，太特么咸了，学了很久也不会。<br>喜欢游泳的在那呆上两天，你就知道那简直就是天堂。<br><img src="https://upload-images.jianshu.io/upload_images/1869467-25fc26c7dd88f55f.JPG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="沙滩"></p>
<p>————————————我是分割线——————————————————</p>
<p>前段时间家里人来深圳玩，我又去了一趟西冲，路线大致相同但也有些不同，再次分享下。</p>
<p>1.起点还是<code>深圳北</code>，时间是接近中午的时候。这次因为带着家人路途遥远，我们就在<code>大棚中心站</code>下的车，补充了能量吃了个午饭。在那公交站附近有一个华润万家超市，我们把很多多余的背包都存放在那了，免费的，你就说去买东西等下来拿😄。</p>
<p>2.然后坐<code>M232</code>，直接到达<code>西冲一号浴场</code>。然后租了几个游泳圈就过去了。然后发现人炒鸡多。。。这个时候是下午不到4点的时候。当然，海水依旧清澈，旁边时不时有人坐快艇过，一浪接一浪。有人冲浪、有人潜水。</p>
<p>3.然后我妈妈不打算住宿，我们玩了几个小时就打道回府了。差不多6点钟开始出发，折回大棚中心，取东西，然后等<code>E11</code>，8点半到了家，之后当然就是丰盛的晚餐咯。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/08/iOS随笔/iOS瀑布流之横-纵瀑布流/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小坤">
      <meta itemprop="description" content="划水划水。。。">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="花果山松鼠’s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/06/08/iOS随笔/iOS瀑布流之横-纵瀑布流/" class="post-title-link" itemprop="url">iOS瀑布流之横-纵瀑布流</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-06-08 10:16:12" itemprop="dateCreated datePublished" datetime="2018-06-08T10:16:12+08:00">2018-06-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-12-26 14:56:48" itemprop="dateModified" datetime="2018-12-26T14:56:48+08:00">2018-12-26</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/iOS随笔/" itemprop="url" rel="index"><span itemprop="name">iOS随笔</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#一、开篇</p>
<p>####1.瀑布流设计讨论<br>1.应用场景：在我们app开发中，瀑布流一般应用于大数据展示时，比如淘宝搜索页面、蘑菇街app、各大直播app主播列表页面等等。</p>
<p>2.设计思路：我们首要考虑UICollectionView,因为UICollectionView特殊性和可复用性。因为瀑布流每个格子item大小不同，需要计算每个item的宽高，就需要自定义UICollectionViewLayout。</p>
<p>####2.瀑布流分类<br>我把瀑布流分为两种：垂直瀑布流、水平瀑布流。</p>
<p>1.垂直瀑布流：在我们app上实现的瀑布流一般是垂直瀑布流，也就是列数可设定，item宽度由列数决定，从上往下布局。</p>
<p>2.水平瀑布流：我在搜索网页百度图片时，看到百度图片的布局从而想到的一种布局方式。每行的高度是可设定的，item高度由图片大小决定，比例缩放。</p>
<p>####3.瀑布流样式展示<br><img src="https://upload-images.jianshu.io/upload_images/1869467-06e7c4b154b9f2ac.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="垂直瀑布.jpeg"><br><img src="https://upload-images.jianshu.io/upload_images/1869467-02a5fe8096cbcf84.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="水平瀑布.jpeg"></p>
<p>#二、具体实现</p>
<p>####1.创建一个UICollectionViewCell，它上面只有一个imageView。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// CollectionViewCell.m</span><br><span class="line">- (instancetype)initWithFrame:(CGRect)frame &#123;</span><br><span class="line">    </span><br><span class="line">    if (self = [super initWithFrame:frame]) &#123;</span><br><span class="line">        _imageView = [[UIImageView alloc] init];</span><br><span class="line">        _imageView.frame = self.bounds;</span><br><span class="line">        [self addSubview:_imageView];</span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>####2.我们需要自定义一个layout，并且暴露一些可设置的属性用来控制瀑布流的对应展示，让瀑布流可用性更强大一些。</p>
<p>######2.1 头文件：DYTWaterflowLayout.h<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">@interface DYTWaterflowLayout : UICollectionViewLayout</span><br><span class="line">/**</span><br><span class="line"> *  行高(水平瀑布流时),默认为100</span><br><span class="line"> */</span><br><span class="line">@property (nonatomic, assign) CGFloat rowHeight;</span><br><span class="line">/**</span><br><span class="line"> *  单元格宽度(垂直瀑布流时)</span><br><span class="line"> */</span><br><span class="line">@property (nonatomic, assign, readonly) CGFloat itemWidth;</span><br><span class="line">/**</span><br><span class="line"> *  列数 : 默认为3</span><br><span class="line"> */</span><br><span class="line">@property (nonatomic, assign) NSInteger numberOfColumns;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *  内边距 : 每一列之间的间距 (top, left, bottom, right)默认为&#123;10, 10, 10, 10&#125;;</span><br><span class="line"> */</span><br><span class="line">@property (nonatomic, assign) UIEdgeInsets insets;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *  每一行之间的间距 : 默认为10</span><br><span class="line"> */</span><br><span class="line">@property (nonatomic, assign) CGFloat rowGap;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *  每一列之间的间距 : 默认为10</span><br><span class="line"> */</span><br><span class="line">@property (nonatomic, assign) CGFloat columnGap;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *  高度数组 : 存储所有item的高度</span><br><span class="line"> */</span><br><span class="line">@property (nonatomic, strong) NSArray *itemHeights;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *  宽度数组 : 存储所有item的宽度</span><br><span class="line"> */</span><br><span class="line">@property (nonatomic, strong) NSArray *itemWidths;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *  瀑布流类型 : 分为水平瀑布流 和 垂直瀑布流</span><br><span class="line"> */</span><br><span class="line">@property (nonatomic, assign) DirectionType type;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure></p>
<p>######2.2 .m文件：DYTWaterflowLayout.m属性声明<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@interface DYTWaterflowLayout()</span><br><span class="line"></span><br><span class="line">@property (nonatomic, strong) NSMutableArray *itemAttributes; // 存放每个cell的布局属性</span><br><span class="line"></span><br><span class="line">// 垂直瀑布流相关属性</span><br><span class="line">@property (nonatomic, strong) NSMutableArray *columnsHeights; // 每一列的高度(count=多少列)</span><br><span class="line">@property (nonatomic, assign) CGFloat maxHeight; // 最长列的高度(最大高度)</span><br><span class="line">@property (nonatomic, assign) CGFloat minHeight; // 最短列的高度(最低高度)</span><br><span class="line">@property (nonatomic, assign) NSInteger minIndex; // 最短列的下标</span><br><span class="line">@property (nonatomic, assign) NSInteger maxIndex; // 最长列的下标</span><br><span class="line"></span><br><span class="line">// 水平瀑布流相关属性</span><br><span class="line">@property (nonatomic, strong) NSMutableArray *columnsWidths; // 每一行的宽度(count不确定)</span><br><span class="line">@property (nonatomic, assign) NSInteger tempItemX; // 临时x : 用来计算每个cell的x值</span><br><span class="line">@property (nonatomic, assign) NSInteger maxRowIndex; //最大行</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure></p>
<p>######2.3 .m文件：DYTWaterflowLayout.m主要方法实现<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line">// </span><br><span class="line">#pragma mark -- 系统内部方法</span><br><span class="line">/**</span><br><span class="line"> *  重写父类布局</span><br><span class="line"> */</span><br><span class="line">- (void)prepareLayout &#123;</span><br><span class="line">    </span><br><span class="line">    [super prepareLayout];</span><br><span class="line">    // (水平瀑布流时)重置最大行</span><br><span class="line">    if ((self.type == HorizontalType)) &#123;</span><br><span class="line">        self.maxRowIndex = 0;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    if (self.type == VerticalType) &#123;</span><br><span class="line">        // (垂直瀑布流时)重置每一列的高度</span><br><span class="line">        [self.columnsHeights removeAllObjects];</span><br><span class="line">        for (NSUInteger i = 0; i &lt; self.numberOfColumns; i++) &#123;</span><br><span class="line">            [self.columnsHeights addObject:@(self.insets.top)];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 计算所有cell的布局属性</span><br><span class="line">    [self.itemAttributes removeAllObjects];</span><br><span class="line">    NSUInteger itemCount = [self.collectionView numberOfItemsInSection:0];</span><br><span class="line">    self.tempItemX = self.insets.left;</span><br><span class="line">    for (NSUInteger i = 0; i &lt; itemCount; ++i) &#123;</span><br><span class="line">        NSIndexPath *indexPath = [NSIndexPath indexPathForItem:i inSection:0];</span><br><span class="line">        if (self.type == VerticalType) &#123;</span><br><span class="line">            [self setVerticalFrame:indexPath];</span><br><span class="line">        &#125;else if ((self.type == HorizontalType))&#123;</span><br><span class="line">            [self setHorizontalFrame:indexPath];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *  水平瀑布：设置每一个attrs的frame，并加入数组中</span><br><span class="line"> */</span><br><span class="line">- (void)setHorizontalFrame:(NSIndexPath *)indexPath &#123;</span><br><span class="line">    UICollectionViewLayoutAttributes *attrs = [UICollectionViewLayoutAttributes layoutAttributesForCellWithIndexPath:indexPath];</span><br><span class="line">    CGFloat w = [self.itemWidths[indexPath.item] floatValue];</span><br><span class="line">    CGFloat width = w + self.columnGap;</span><br><span class="line">    CGFloat h = (self.rowHeight == 0) ? 100 : self.rowHeight;</span><br><span class="line">    </span><br><span class="line">    /**</span><br><span class="line">     *  如果当前的x值+当前cell的宽度 超出了 屏幕宽度，那么就要换行了。</span><br><span class="line">     *  换行操作 : 最大行+1，tempItemX重置为10(self.insets.left)。</span><br><span class="line">     */</span><br><span class="line">    if (self.tempItemX + w &gt; [UIScreen mainScreen].bounds.size.width) &#123;</span><br><span class="line">        self.maxRowIndex++;</span><br><span class="line">        self.tempItemX = self.insets.left;</span><br><span class="line">    &#125;</span><br><span class="line">    CGFloat x = self.tempItemX;</span><br><span class="line">    CGFloat y = self.insets.top + self.maxRowIndex * (h + self.rowGap);</span><br><span class="line">    attrs.frame = CGRectMake(x, y, w, h);</span><br><span class="line">    </span><br><span class="line">    /**</span><br><span class="line">     * 注：1.cell的宽度和高度算起来比较简单 : 宽度由外部传进来，高度固定为rowHeight(默认为100)。</span><br><span class="line">     *    2.cell的x : 通过tempItemX算好了。</span><br><span class="line">     *    3.cell的y : minHeight最短列的高度，也就是最低高度，作为当前cell的起始y，当然要加上行之间的间隙。</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    NSLog(@&quot;%@&quot;,NSStringFromCGRect(attrs.frame));</span><br><span class="line">    [self.itemAttributes addObject:attrs];</span><br><span class="line">    self.tempItemX += width;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *  垂直瀑布：设置每一个attrs的frame，并加入数组中</span><br><span class="line"> */</span><br><span class="line">- (void)setVerticalFrame:(NSIndexPath *)indexPath &#123;</span><br><span class="line">    UICollectionViewLayoutAttributes *attrs = [UICollectionViewLayoutAttributes layoutAttributesForCellWithIndexPath:indexPath];</span><br><span class="line">    </span><br><span class="line">    // cell的frame</span><br><span class="line">    CGFloat w = self.itemWidth;</span><br><span class="line">    CGFloat h = [self.itemHeights[indexPath.item] floatValue];</span><br><span class="line">    CGFloat x = self.insets.left + self.minIndex * (w + self.columnGap);</span><br><span class="line">    CGFloat y = self.minHeight + self.rowGap;</span><br><span class="line">    attrs.frame = CGRectMake(x, y, w, h);</span><br><span class="line">    </span><br><span class="line">    /**</span><br><span class="line">     * 注：1.cell的宽度和高度算起来比较简单 : 宽度固定(itemWidth已经算好)，高度由外部传进来</span><br><span class="line">     *    2.cell的x : minIndex最短列作为当前列。</span><br><span class="line">     *    3.cell的y : minHeight最短列的高度，也就是最低高度，作为当前cell的起始y，当然要加上行之间的间隙。</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    // 更新数组中的最大高度</span><br><span class="line">    self.columnsHeights[self.minIndex] = @(CGRectGetMaxY(attrs.frame));</span><br><span class="line">    NSLog(@&quot;%@&quot;,NSStringFromCGRect(attrs.frame));</span><br><span class="line">    [self.itemAttributes addObject:attrs];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *  返回collectionView的尺寸</span><br><span class="line"> */</span><br><span class="line">- (CGSize)collectionViewContentSize &#123;</span><br><span class="line">    CGFloat height;</span><br><span class="line">    if (self.type == HorizontalType) &#123;</span><br><span class="line">        CGFloat rowHeight = (self.rowHeight == 0) ? 100 : self.rowHeight;</span><br><span class="line">        height = self.insets.top + (self.maxRowIndex+1) * (rowHeight + self.rowGap);</span><br><span class="line">    &#125;else &#123;</span><br><span class="line">        height = self.maxHeight;</span><br><span class="line">    &#125;</span><br><span class="line">    return CGSizeMake(self.collectionView.frame.size.width, height);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *  所有元素（比如cell、补充控件、装饰控件）的布局属性</span><br><span class="line"> */</span><br><span class="line">- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect</span><br><span class="line">&#123;</span><br><span class="line">    return self.itemAttributes;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>######3.1 直接在控制器里使用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 设置布局</span><br><span class="line">DYTWaterflowLayout *layout = [[DYTWaterflowLayout alloc]init];</span><br><span class="line">layout.type = _type;</span><br><span class="line">// 设置相关属性(不设置的话也行，都有相关默认配置)</span><br><span class="line">layout.numberOfColumns = 3;</span><br><span class="line">layout.columnGap = 10;</span><br><span class="line">layout.rowGap = 10;</span><br><span class="line">layout.insets = UIEdgeInsetsMake(10, 10, 10, 10);</span><br><span class="line">layout.rowHeight = 100;</span><br><span class="line">self.collectionView.collectionViewLayout = self.waterflowLayout = layout;</span><br></pre></td></tr></table></figure></p>
<p>######3.2 (举例)垂直瀑布流时，SDWebImage获取图片block里的具体实现<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">if (weakSelf.heights.count &lt; weakSelf.allImageUrls.count) &#123;</span><br><span class="line">   // 根据图片原始比例 计算 当前图片的高度(宽度固定)</span><br><span class="line">   CGFloat scale = image.size.height / image.size.width;</span><br><span class="line">   CGFloat width = weakSelf.waterflowLayout.itemWidth;</span><br><span class="line">   CGFloat height = width * scale;</span><br><span class="line">   NSNumber *heightNum = [NSNumber numberWithFloat:height];</span><br><span class="line">   [weakSelf.heights addObject:heightNum];</span><br><span class="line">&#125;</span><br><span class="line">if (weakSelf.heights.count == weakSelf.allImageUrls.count) &#123;</span><br><span class="line">   // 赋值所有cell的高度数组itemHeights</span><br><span class="line">   weakSelf.waterflowLayout.itemHeights = weakSelf.heights;</span><br><span class="line">   [weakSelf.collectionView reloadData];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>######3.3 UICollectionViewDataSource中要注意的点<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath &#123;</span><br><span class="line">    CollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:reuseIdentifier forIndexPath:indexPath];</span><br><span class="line">    cell.imageView.image = self.picImageArr[indexPath.item];</span><br><span class="line">    // 注：非常关键的一句，由于cell的复用，imageView的frame可能和cell对不上，需要重新设置。</span><br><span class="line">    cell.imageView.frame = cell.bounds;</span><br><span class="line">    cell.backgroundColor = [UIColor orangeColor];</span><br><span class="line">    return cell;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>#三、总结<br>1.瀑布流使用场景比较广泛，也是常用的技术之一，我也是又回顾了一遍，并且总结了整体的思路决定分享出来，结尾有demo，童鞋们可以自行下载。另外我参考的资料链接也会贴出，供大家研究比对。<br>2.水平瀑布流还没达到百度图片搜索的那种效果，右边距离屏幕间隙太大了，所以影响美观。后续会继续研究，期待有所突破。<br>3.有种情况是后台直接给图片的所有数据给我们，包括url、图片宽高等等，其实这样就是后台已经做好了图片的顺序优化处理。不过我们可以自己研究一下这个排序思路。如何达到右边间隙几乎相同，比如都为10。<br>4.当然有疑惑的地方可以留言或者直接私信我，我们可以一起讨论。</p>
<p>#四、总结最终实现效果:<br><img src="https://upload-images.jianshu.io/upload_images/1869467-5b6da2338f3afe16.gif?imageMogr2/auto-orient/strip" alt="瀑布流.gif"></p>
<p>本文章demo：<br><a href="https://github.com/DaiYongTao/DYTWaterflowLayoutDemo" target="_blank" rel="noopener">瀑布流Demo</a><br>参考相关文章：<br><a href="https://www.jianshu.com/p/826a43d28a39" target="_blank" rel="noopener">iOS–瀑布流的实现</a>  – <a href="/u/12c258ba8408">作者Go_Spec</a><br><a href="https://www.jianshu.com/p/78830bdb04a9" target="_blank" rel="noopener">iOS 瀑布流基本实现</a>  – <a href="/u/19f68e4b47ce">作者iOS_成才录</a></p>
<blockquote>
<p>额。。。如果想知道图片里的小姐姐是谁，请直接在文章下面留言。因为我想暂时留点悬念给大家。(皮一下就很开心😄)</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/22/iOS随笔/UITableViewCell的高度自适应浅析/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小坤">
      <meta itemprop="description" content="划水划水。。。">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="花果山松鼠’s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/05/22/iOS随笔/UITableViewCell的高度自适应浅析/" class="post-title-link" itemprop="url">UITableViewCell的高度自适应浅析</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-05-22 14:12:12" itemprop="dateCreated datePublished" datetime="2018-05-22T14:12:12+08:00">2018-05-22</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-12-26 14:58:28" itemprop="dateModified" datetime="2018-12-26T14:58:28+08:00">2018-12-26</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/iOS随笔/" itemprop="url" rel="index"><span itemprop="name">iOS随笔</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>—开篇：在我们开发中经常会用到UITableView, TableView上面的cell有时候非常复杂，高度可变、结构可变等等。那么这个时候我们该如何去自适应cell的高度呢。</p>
<p>#一.通过frame去计算</p>
<blockquote>
<p>第一种大家比较容易想到的方法，就是由上往下依次计算控件的frame，再将最下面的控件frame的最大y值拿到，赋值给整个cell_height，得到整个cell的最终高度。</p>
</blockquote>
<p>简单布局的就可直接计算，但，如果复杂一些，结构多变，就需要另外创建一个frameModel来专门计算和存储cell的frame。这种情况逻辑复杂，也比较容易出错。</p>
<p>######需要创建两个模型：model(存储数据)、frameModel(存储cell上子view的frame)</p>
<p>两者间的关系：frameModel是通过model来进行设置的，通过传入的model中的属性，来判断cell中子view显示或隐藏，从而一步一步得到所有的子view的frame值，最后，将cell的高度保存起来。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// model.h</span><br><span class="line">@interface Model : NSObject</span><br><span class="line"></span><br><span class="line">@property (nonatomic, copy) NSString *name; //昵称</span><br><span class="line">@property (nonatomic, copy) NSString *icon; //头像</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// FrameModel.h</span><br><span class="line">@class Model;</span><br><span class="line">@interface FrameModel : NSObject</span><br><span class="line"></span><br><span class="line">/** 数据模型 */</span><br><span class="line">@property (nonatomic, strong) Model *model;</span><br><span class="line">/** 头像frame */</span><br><span class="line">@property (nonatomic, assign, readonly) CGRect iconViewF;</span><br><span class="line">/** 昵称frame */</span><br><span class="line">@property (nonatomic, assign, readonly) CGRect nameLabelF;</span><br><span class="line"></span><br><span class="line">/** cell的高度 */</span><br><span class="line">@property (nonatomic, assign, readonly) CGFloat cellHeight;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">// FrameModel.m</span><br><span class="line">- (void)setModel:(Model *)model &#123;</span><br><span class="line">    </span><br><span class="line">    _model = model;</span><br><span class="line">    </span><br><span class="line">    CGFloat screen_Width = [UIScreen mainScreen].bounds.size.width;</span><br><span class="line">    </span><br><span class="line">    // cell的宽度</span><br><span class="line">    CGFloat cellW = screen_Width;</span><br><span class="line"></span><br><span class="line">    // cell的边框宽度</span><br><span class="line">    CGFloat cellBorderW = 10;</span><br><span class="line">    // cell之间的间距</span><br><span class="line">    CGFloat cellBorderMargin = 15;</span><br><span class="line">    </span><br><span class="line">    // 1.头像</span><br><span class="line">    CGFloat iconWH = 35;</span><br><span class="line">    CGFloat iconX = cellBorderW;</span><br><span class="line">    CGFloat iconY = cellBorderW;</span><br><span class="line">    _iconViewF = CGRectMake(iconX, iconY, iconWH, iconWH);</span><br><span class="line">    </span><br><span class="line">    // 2.昵称</span><br><span class="line">    CGFloat nameX = CGRectGetMaxX(self.iconViewF) + cellBorderW;</span><br><span class="line">    CGFloat nameY = iconY;</span><br><span class="line">    CGSize nameSize = [model.name sizeWithFont:[UIFont systemFontOfSize:15]];</span><br><span class="line">    _nameLabelF = (CGRect)&#123;&#123;nameX,nameY&#125;,nameSize&#125;;</span><br><span class="line">    </span><br><span class="line">    // 13.cell的宽度</span><br><span class="line">    _cellHeight = CGRectGetMaxY(self.nameLabelF) + cellBorderMargin;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// cell.h</span><br><span class="line">@class FrameModel;</span><br><span class="line">@interface Cell : UITableViewCell</span><br><span class="line"></span><br><span class="line">+ (Cell *)cellWithTableView:(UITableView *)tableView;</span><br><span class="line">/** frame模型 */</span><br><span class="line">@property (nonatomic, strong) FrameModel *frameModel;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// cell.m</span><br><span class="line">- (void)setFrameModel:(FrameModel *)frameModel &#123;</span><br><span class="line">    </span><br><span class="line">    _frameModel = frameModel;</span><br><span class="line">    </span><br><span class="line">    Model *model = frameModel.model;</span><br><span class="line">    // 头像</span><br><span class="line">    self.iconView.frame = frameModel.iconViewF;</span><br><span class="line">    [self.iconView sd_setImageWithURL:[NSURL URLWithString:model.icon]];</span><br><span class="line">    </span><br><span class="line">    // 昵称</span><br><span class="line">    self.nameLabel.frame = frameModel.nameLabelF;</span><br><span class="line">    self.nameLabel.text = model.name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这一步步走下来应该非常直观的。<br>最后也就只有一步了，将拿到的数据进行model和frameModel之间的转换。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> *  将Model模型转为FrameModel模型</span><br><span class="line"> */</span><br><span class="line">- (NSArray *)frameModelsWithStatuses:(NSArray *)models &#123;</span><br><span class="line">    </span><br><span class="line">    NSMutableArray *frames = [NSMutableArray array];</span><br><span class="line">    for (Model *model in models) &#123;</span><br><span class="line">        FrameModel *frame = [[FrameModel alloc] init];</span><br><span class="line">        frame.model = model;</span><br><span class="line">        [frames addObject:frame];</span><br><span class="line">    &#125;</span><br><span class="line">    return frames;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接下来就是数据展示咯，将frameModel导入进cell里面就OK了。</p>
<p>这其实是一种分离思路，将各个模块分离化，逻辑会清晰很多，对于复杂的数据和UI异常适合。</p>
<p>额，其中有一个sizeWithFont，是我创建的一个分类，只是为了简化代码。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// NSString+Extension.m</span><br><span class="line">- (CGSize)sizeWithFont:(UIFont *)font maxW:(CGFloat)maxW &#123;</span><br><span class="line">    NSMutableDictionary *attrs = [NSMutableDictionary dictionary];</span><br><span class="line">    attrs[NSFontAttributeName] = font;</span><br><span class="line">    CGSize maxSize = CGSizeMake(maxW, MAXFLOAT);</span><br><span class="line">    NSString *version = [UIDevice currentDevice].systemVersion;</span><br><span class="line">    if ([version doubleValue] &gt; 7.0) &#123;</span><br><span class="line">        return [self boundingRectWithSize:maxSize options:NSStringDrawingUsesLineFragmentOrigin attributes:attrs context:nil].size;</span><br><span class="line">    &#125;else &#123;</span><br><span class="line">        return [self sizeWithFont:font constrainedToSize:maxSize];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (CGSize)sizeWithFont:(UIFont *)font &#123;</span><br><span class="line">    return [self sizeWithFont:font maxW:MAXFLOAT];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>#二.通过自动布局自动适配（推荐使用）<br>1.在cell中，setModel方法中所做的事情只是将数据导入view中进行展示，其他都不用管。label的话需要设定preferredMaxLayoutWidth属性。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// cell.m</span><br><span class="line">- (void)setModel:(Model *)model &#123;</span><br><span class="line">    _model = model;</span><br><span class="line">    </span><br><span class="line">    // 头像</span><br><span class="line">    [self.iconView sd_setImageWithURL:[NSURL URLWithString:model.icon]];</span><br><span class="line">    // 昵称</span><br><span class="line">    self.nameLabel.text = model.name;    </span><br><span class="line">    CGFloat screen_Width = [UIScreen mainScreen].bounds.size.width;</span><br><span class="line">    CGFloat width = screen_Width - 35 - 5; // label的宽度</span><br><span class="line">    // 自动布局：设定label文字的最大宽度,这个宽度也可以通过外部进行传递，从而设定。</span><br><span class="line">    self.nameLabel.preferredMaxLayoutWidth = width;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>2.在获取cellHeight代理方法中，因为可能无法获取到当前的cell，我们的目的只是要得到cell的高度，所以在这我们创建了一个临时变量cell，用来计算cellHeight。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath&#123;</span><br><span class="line">    self.cell.nameLabel.text = nil;</span><br><span class="line">    self.cell.model = self.models[indexPath.row];</span><br><span class="line">    // cell进行自动布局，可以得到cellHeight</span><br><span class="line">    CGFloat cellHeight = [self.cell.contentView systemLayoutSizeFittingSize:UILayoutFittingCompressedSize].height+1;</span><br><span class="line">    return cellHeight&gt;31.0f? cellHeight:31.0f;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>后记：如果有些需求是想得到tableview最大的高度，让cell完全展示出来，可以监听tableView的contentSize属性。<br>注：iOS10以下，监听contentSize属性；iOS10及以上监听scrollView.contentSize属性。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">float iOS_version = [[[UIDevice currentDevice] systemVersion] floatValue];</span><br><span class="line">if (iOS_version &gt;= 8.0 &amp;&amp; iOS_version &lt; 10.0) &#123;</span><br><span class="line">    [self.tableView addObserver:self forKeyPath:@&quot;contentSize&quot; options:NSKeyValueObservingOptionOld|NSKeyValueObservingOptionNew context:nil];</span><br><span class="line">&#125;else if (iOS_version &gt;= 10.0) &#123;</span><br><span class="line">    [self.tableView addObserver:self forKeyPath:@&quot;scrollView.contentSize&quot; options:NSKeyValueObservingOptionOld|NSKeyValueObservingOptionNew context:nil];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary&lt;NSKeyValueChangeKey,id&gt; *)change context:(void *)context &#123;</span><br><span class="line">    </span><br><span class="line">    float iOS_version = [[[UIDevice currentDevice] systemVersion] floatValue];</span><br><span class="line">    if (iOS_version &gt;= 8.0 &amp;&amp; iOS_version &lt; 10.0) &#123;</span><br><span class="line">        if ([keyPath isEqualToString:@&quot;contentSize&quot;] &amp;&amp; object == self.tableView) &#123;</span><br><span class="line">            CGSize size = [[change objectForKey:@&quot;new&quot;] CGSizeValue];</span><br><span class="line">            CGFloat height = size.height; //得到tableview的高度。</span><br><span class="line">            if(self.viewHeightBlock)&#123;</span><br><span class="line">                self.viewHeightBlock(height);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;else if (iOS_version &gt;= 10.0) &#123;</span><br><span class="line">        if ([keyPath isEqualToString:@&quot;scrollView.contentSize&quot;] &amp;&amp; object == self.tableView) &#123;</span><br><span class="line">            CGSize size = [[change objectForKey:@&quot;new&quot;] CGSizeValue];</span><br><span class="line">            CGFloat height = size.height;</span><br><span class="line">            if(self.viewHeightBlock)&#123;</span><br><span class="line">                self.viewHeightBlock(height);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>看到这里，或许你挥一挥衣袖，只留下了一个赞。😄</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">小坤</p>
              <p class="site-description motion-element" itemprop="description">划水划水。。。</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">60</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/daiyongtao" title="GitHub &rarr; https://github.com/daiyongtao" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:18811508093@163.com" title="E-Mail &rarr; mailto:18811508093@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">小坤</span>

  

  
</div>


<!-- 新增访客统计代码 -->
<div class="busuanzi-count">
    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="site-uv">
      <i class="fa fa-user"></i>
      访问用户： <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 人
    </span>
    <div class="powered-by"></div>
    <span class="site-uv">
      <i class="fa fa-eye"></i>
      访问次数： <span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次
    </span>
    <!-- 博客字数统计 -->
    <span class="site-pv">
      <i class="fa fa-pencil"></i>
      博客全站共： <span class="post-count"></span> 字
    </span>
</div>
<!-- 新增访客统计代码 END-->



  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v6.6.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script src="/js/src/utils.js?v=6.6.0"></script>

  <script src="/js/src/motion.js?v=6.6.0"></script>



  
  

  

  


  <script src="/js/src/bootstrap.js?v=6.6.0"></script>



  



  











  





  

  

  

  

  

  
  

  

  

  

  

  

  

</body>
</html>
